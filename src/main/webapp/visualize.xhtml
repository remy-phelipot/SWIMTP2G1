<?xml version="1.0" encoding="windows-1252"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
   <h:head>
        <title>Vizualisation</title>
        <h:outputStylesheet library="css" name="style.css" />
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
          google.load("visualization", "1", {packages:["corechart"]});
          google.setOnLoadCallback(drawChart);
          function drawChart() {

            var data = google.visualization.arrayToDataTable([
              ['Msg', 'number'],
              ['MsgOk',     #{backingBean.selectedResult.msgCount}-#{backingBean.selectedResult.msgLost}],
              ['MsgLost',   #{backingBean.selectedResult.msgLost}]
              
            ]);

            var options = {
              title: 'Msg received / Msg Lost',
              is3D: true,
              pieHole: 0.5
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart'));

            chart.draw(data, options);
          }
        </script>      
    </h:head>
    <h:body>
        <h:form id="inputForm" enctype="multipart/form-data">
        <table>
            <thead>
                <th colspan="4"><h2>Results Overview</h2></th>
                
            </thead>
            <tbody>
                <tr>
                    <td>
                         <h2>Select your Scenario : </h2>
                    </td> 
                    <td>
                        <h:selectOneMenu value="#{backingBean.selectedScenario}" converter="#{scenarioConverter}">
   			<f:selectItems value="#{visualizeBean.listScenario}" var="c"
                                       itemLabel="#{c.name} - #{c.description}" itemValue="#{c}" />
                    
                        </h:selectOneMenu>
                    </td>
                    <td>
                        <h:commandButton styleClass="btn save" value="Submit"/>
                    </td>
                    <td>
                        <h:commandButton styleClass="btn delete" value="Add Result" action="#{backingBean.addResult()}"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h2>Select one Result : </h2>
                    </td> 
                    <td>
                         <h:selectOneMenu id="som" value="#{backingBean.selectedResult}" converter="#{resultConverter}">
                 <f:selectItems value="#{backingBean.selectedScenario.results}" var="c"
                                           itemLabel="#{c.id}" itemValue="#{c}" /> 

                        </h:selectOneMenu>
                    </td>
                    <td>
                        <h:commandButton styleClass="btn save" value="Submit"/>
                    </td>
                    <td>
                        <h:commandButton styleClass="btn delete" value="Delete Result" action="#{backingBean.deleteResult()}"/> 
                    </td>
                </tr>                
            </tbody>
        </table>

        </h:form>
        <div id="piechart" style="width: 900px; height: 500px;"></div>
    </h:body>
</html>
